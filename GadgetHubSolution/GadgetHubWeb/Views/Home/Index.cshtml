@{
    ViewData["Title"] = "Welcome to Gadget Hub";
    var featuredProducts = ViewBag.FeaturedProducts as List<ProductDto> ?? new List<ProductDto>();
    var isAuthenticated = ViewBag.IsAuthenticated as bool? ?? false;
    var userType = ViewBag.UserType as string;
}

<!-- Hero Section -->
<section class="hero-section bg-gradient-primary text-white">
    <div class="container">
        <div class="row align-items-center min-vh-50">
            <div class="col-lg-6">
                <div class="hero-content animate-slide-up">
                    <h1 class="display-4 fw-bold mb-4">
                        Welcome to <span class="text-warning">Gadget Hub</span>
                    </h1>
                    <p class="lead mb-4">
                        Discover premium tech gadgets with our innovative quotation system.
                        Get competitive prices from multiple distributors instantly!
                    </p>
                    <div class="hero-buttons">
                        <a href="@Url.Action("Products", "Home")" class="btn btn-warning btn-lg me-3 rounded-pill px-4">
                            <i class="fas fa-search me-2"></i>Explore Products
                        </a>
                        @if (!isAuthenticated)
                        {
                            <a href="@Url.Action("RegisterCustomer", "Auth")" class="btn btn-outline-light btn-lg rounded-pill px-4">
                                <i class="fas fa-user-plus me-2"></i>Get Started
                            </a>
                        }
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-image animate-float">
                    <img src="https://www.sunwayputramall.com/static/shops/dd247668974bcbbea3bd84c6c164113f/w768.jpg"
                         alt="Premium Gadgets" class="img-fluid rounded-3 shadow-lg">
                </div>
            </div>
        </div>
    </div>
    <div class="hero-wave">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#ffffff"></path>
        </svg>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-lg-8 mx-auto">
                <h2 class="display-5 fw-bold mb-3">Why Choose Gadget Hub?</h2>
                <p class="lead text-muted">Experience the future of tech shopping with our innovative platform</p>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="feature-card text-center h-100">
                    <div class="feature-icon bg-primary text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <h5 class="fw-bold">Easy Shopping</h5>
                    <p class="text-muted">Browse and shop premium gadgets with seamless cart experience</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="feature-card text-center h-100">
                    <div class="feature-icon bg-success text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-file-invoice-dollar"></i>
                    </div>
                    <h5 class="fw-bold">Smart Quotations</h5>
                    <p class="text-muted">Get competitive quotes from multiple distributors instantly</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="feature-card text-center h-100">
                    <div class="feature-icon bg-warning text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-shipping-fast"></i>
                    </div>
                    <h5 class="fw-bold">Fast Delivery</h5>
                    <p class="text-muted">Quick delivery from our trusted distributor network</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="feature-card text-center h-100">
                    <div class="feature-icon bg-info text-white rounded-circle mx-auto mb-3">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h5 class="fw-bold">Secure Platform</h5>
                    <p class="text-muted">Your data and transactions are protected with enterprise security</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products Section -->
@if (featuredProducts.Any())
{
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row text-center mb-5">
                <div class="col-lg-8 mx-auto">
                    <h2 class="display-5 fw-bold mb-3">Featured Products</h2>
                    <p class="lead text-muted">Check out our latest and most popular gadgets</p>
                </div>
            </div>

            <div class="row g-4">
                @foreach (var product in featuredProducts.Take(4))
                {
                    <div class="col-lg-3 col-md-6">
                        <div class="product-card h-100">
                            <div class="product-image-container">
                                @if (!string.IsNullOrEmpty(product.ImageUrl))
                                {
                                    <img src="@product.ImageUrl"
                                         alt="@product.Name" 
                                         class="product-image"
                                         loading="lazy"
                                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'; console.warn('Image failed to load:', this.src);"
                                         onload="this.style.display='block'; this.nextElementSibling.style.display='none'; console.log('Image loaded:', this.alt);">
                                }
                                
                                <!-- Enhanced fallback placeholder -->
                                <div class="product-image-placeholder @(!string.IsNullOrEmpty(product.ImageUrl) ? "d-none" : "d-flex")" 
                                     style="height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                            align-items: center; justify-content: center; color: white; border-radius: 8px;
                                            position: relative; overflow: hidden;">
                                    <div class="text-center" style="z-index: 2; position: relative;">
                                        <i class="fas fa-mobile-alt fa-3x mb-2"></i>
                                        <div class="fw-bold">@product.Name</div>
                                        <small>@product.Brand</small>
                                    </div>
                                    <!-- Shimmer effect -->
                                    <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; 
                                               background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
                                               transform: rotate(45deg); animation: shimmer 2s infinite; z-index: 1;"></div>
                                </div>
                                
                                <div class="product-overlay">
                                    <a href="@Url.Action("ProductDetail", "Home", new { id = product.Id })"
                                       class="btn btn-primary btn-sm rounded-pill">
                                        <i class="fas fa-eye me-1"></i>View Details
                                    </a>
                                </div>
                            </div>
                            <div class="card-body p-3">
                                @if (!string.IsNullOrEmpty(product.Brand))
                                {
                                    <span class="badge bg-secondary mb-2">@product.Brand</span>
                                }
                                <h6 class="card-title fw-bold">@product.Name</h6>
                                <p class="card-text text-muted small">@product.Description</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="text-primary fw-bold">
                                        <i class="fas fa-file-invoice-dollar me-1"></i>Request Quote
                                    </div>
                                    <div class="rating">
                                        <i class="fas fa-star text-warning"></i>
                                        <i class="fas fa-star text-warning"></i>
                                        <i class="fas fa-star text-warning"></i>
                                        <i class="fas fa-star text-warning"></i>
                                        <i class="fas fa-star-half-alt text-warning"></i>
                                        <small class="text-muted ms-1">(4.5)</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <div class="text-center mt-4">
                <a href="@Url.Action("Products", "Home")" class="btn btn-primary btn-lg rounded-pill px-4">
                    <i class="fas fa-th-large me-2"></i>View All Products
                </a>
            </div>
        </div>
    </section>
}

<!-- Stats Section -->
<section class="py-5">
    <div class="container">
        <div class="row text-center g-4">
            <div class="col-lg-3 col-md-6">
                <div class="stat-card">
                    <div class="stat-number text-primary">23+</div>
                    <div class="stat-label">Premium Products</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card">
                    <div class="stat-number text-success">3</div>
                    <div class="stat-label">Trusted Distributors</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card">
                    <div class="stat-number text-warning">100%</div>
                    <div class="stat-label">Secure Transactions</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card">
                    <div class="stat-number text-info">24/7</div>
                    <div class="stat-label">Customer Support</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section bg-gradient-primary text-white py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-8 mx-auto">
                <h2 class="display-5 fw-bold mb-3">Ready to Start Shopping?</h2>
                <p class="lead mb-4">Join thousands of satisfied customers and discover amazing deals</p>
                @if (!isAuthenticated)
                {
                    <div>
                        <a href="@Url.Action("RegisterCustomer", "Auth")" class="btn btn-warning btn-lg me-3 rounded-pill px-4">
                            <i class="fas fa-user-plus me-2"></i>Create Account
                        </a>
                        <a href="@Url.Action("Products", "Home")" class="btn btn-outline-light btn-lg rounded-pill px-4">
                            <i class="fas fa-search me-2"></i>Browse Products
                        </a>
                    </div>
                }
                else
                {
                    <a href="@Url.Action("Products", "Home")" class="btn btn-warning btn-lg rounded-pill px-4">
                        <i class="fas fa-search me-2"></i>Discover New Products
                    </a>
                }
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // Animate elements on scroll
        $(document).ready(function() {
            // Cart count update (implement based on your cart logic)
            updateCartCount();

            // Smooth scroll for anchor links
            $('a[href^="#"]').on('click', function(event) {
                var target = $(this.getAttribute('href'));
                if( target.length ) {
                    event.preventDefault();
                    $('html, body').stop().animate({
                        scrollTop: target.offset().top - 80
                    }, 1000);
                }
            });
        });

        function updateCartCount() {
            // This would typically fetch from API or session
            // For now, just show 0
            $('.cart-count').text('0');
        }
    </script>
}